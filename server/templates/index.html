<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Roller Blinds Control</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-size: 1rem;
    }

    h2 {
      margin-top: 40px;
      color: #333;
      font-weight: 600;
    }

    .form-section {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 25px;
      margin-bottom: 40px;
    }

    .slider-value {
      font-weight: 600;
      color: #0d6efd;
      margin-left: 10px;
    }

    input[type="range"] {
      width: 100%;
      accent-color: #0d6efd;
    }

    .btn {
      min-width: 100px;
    }

    table {
      background: #fff;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    th {
      background-color: #0d6efd;
      color: white;
      text-align: center;
    }

    td {
      text-align: center;
      vertical-align: middle;
    }

    @media (max-width: 576px) {
      body {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body class="py-4 px-3 px-sm-5">

<div class="container">

  <h2>Roller Blind Control</h2>
  <div class="form-section">
    <form method="post">
      <div class="mb-3">
        <label for="slider" class="form-label">Set Position</label>
        <input 
          type="range" 
          name="value" 
          min="0" 
          max="100" 
          value="{{ slider_position }}" 
          id="slider"
          class="form-range"
          oninput="updateValue(this.value)"
        >
        <span id="sliderValue" class="slider-value">{{ slider_position }}%</span>
      </div>
      <input type="submit" name="action" value="Move" class="btn btn-primary w-100 w-sm-auto">
    </form>
  </div>

  <h2>Schedule Roller Blind Movement</h2>
  <div class="form-section">
    <form method="post" class="row g-3">
      <div class="col-12 col-md-4">
        <label for="hour" class="form-label">Hour (0–23)</label>
        <input type="number" id="hour" name="hour" min="0" max="23" class="form-control" required>
      </div>
      <div class="col-12 col-md-4">
        <label for="minute" class="form-label">Minute (0–59)</label>
        <input type="number" id="minute" name="minute" min="0" max="59" class="form-control" required>
      </div>
      <div class="col-12 col-md-4">
        <label for="position" class="form-label">Position (%)</label>
        <input type="number" id="position" name="position" min="0" max="100" class="form-control" required>
      </div>
      <div class="col-12">
        <input type="submit" name="action" value="Schedule" class="btn btn-success w-100 w-sm-auto">
      </div>
    </form>
  </div>

  <h2>Saved Schedules</h2>
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead>
        <tr>
          <th>Hour</th>
          <th>Minute</th>
          <th>Position (%)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for schedule in schedules %}
        <tr>
          <td>{{ schedule[1] }}</td>
          <td>{{ schedule[2] }}</td>
          <td>{{ schedule[3] }}</td>
          <td>
            <form method="post" class="d-inline">
              <input type="hidden" name="id" value="{{ schedule[0] }}">
              <input type="submit" name="action" value="Delete" class="btn btn-danger btn-sm w-100 w-sm-auto">
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

<script>
function updateValue(val) {
    document.getElementById('sliderValue').textContent = val + "%";
}
</script>

</body>
</html>
